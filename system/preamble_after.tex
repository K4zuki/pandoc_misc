%% for some of snippets
% Copyright (c) 2017, Pascal Wagler;
% Copyright (c) 2014--2017, John MacFarlane
%
% All rights reserved.
%
% Redistribution and use in source and binary forms, with or without
% modification, are permitted provided that the following conditions
% are met:
%
% - Redistributions of source code must retain the above copyright
% notice, this list of conditions and the following disclaimer.
%
% - Redistributions in binary form must reproduce the above copyright
% notice, this list of conditions and the following disclaimer in the
% documentation and/or other materials provided with the distribution.
%
% - Neither the name of John MacFarlane nor the names of other
% contributors may be used to endorse or promote products derived
% from this software without specific prior written permission.
%
% THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
% "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
% LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
% FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
% COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
% INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
% BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
% LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
% CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
% LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
% ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
% POSSIBILITY OF SUCH DAMAGE.
%%

%%
% For usage information and examples visit the GitHub page of this template:
% https://github.com/Wandmalfarbe/pandoc-latex-template
%%
%\usepackage{fancyhdr}
%\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
%\renewcommand{\sectionmark}[1]{\markright{#1}}
%\pagestyle{fancy}
%\fancyhf{}
%\fancyhead[LE,RO]{\thepage}
%\fancyhead[LO]{\itshape\nouppercase{\rightmark}}
%\fancyhead[RE]{\itshape\nouppercase{\leftmark}}
% \fancyfoot[CE,CO]{\thepage}
%\renewcommand{\headrulewidth}{0pt}


% Thanks to this github comment https://github.com/jgm/pandoc/issues/3145#issuecomment-302787889
\newcommand{\Begin}{\begin}
\newcommand{\End}{\end}
\usepackage{subfig}
\ifxetex
    \usepackage{xeCJKfntef}
    $if(CJKsansfont)$
    \setCJKsansfont[$for(CJKoptions)$$CJKoptions$$sep$,$endfor$]{$CJKsansfont$}
    $endif$
    $if(CJKmonofont)$
    \setCJKmonofont[Scale=1.0,$for(CJKoptions)$$CJKoptions$$sep$,$endfor$]{$CJKmonofont$}
    $endif$
\fi
$if(listings)$
\usepackage{listings}
$if(verbcolored)$
% Hint(1): https://tex.stackexchange.com/questions/191131/how-to-set-fit-height-and-width-for-tcbox-according-to-the-text-inside
% Hint(2): https://tex.stackexchange.com/questions/218928/tcbox-raise-base-for-selected-text-only
% Hint(3): http://texdoc.net/texmf-dist/doc/latex/tcolorbox/tcolorbox.pdf
\renewcommand{\passthrough}[1]{\tcbox[colback=listing-background,colframe=listing-rule,
size=tight,on line,left=0.4pt,right=0.4pt,before upper=\strut,rounded corners=all]{#1}}
$endif$
%
% https://github.com/Wandmalfarbe/pandoc-latex-template
% Listings
%
%
\lstdefinestyle{eisvogel_listing_style}{
% language=java,
numbers=left,
backgroundcolor=\color{listing-background},
basicstyle=\color{listing-text-color}\footnotesize\ttfamily, % print whole listing small
xleftmargin=0.8em, % 2.8 with line numbers
breaklines=true,
frame=single,
framesep=0.6mm,
rulecolor=\color{listing-rule},
frameround=ffff,
framexleftmargin=0.4em, % 2.4 with line numbers | 0.4 without them
tabsize=4, %width of tabs
numberstyle=\color{listing-numbers}\footnotesize\ttfamily,
aboveskip=1.0em,
keywordstyle=\color{listing-keyword}\bfseries, % underlined bold black keywords
classoffset=0,
sensitive=true,
identifierstyle=\color{listing-identifier}, % nothing happens
commentstyle=\color{listing-comment}, % white comments
morecomment=[s][\color{listing-javadoc-comment}]{/**}{*/},
stringstyle=\color{listing-string}, % typewriter type for strings
showstringspaces=false, % no special string spaces
escapeinside={/*@}{@*/}, % for comments
literate=
{á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
{Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
{à}{{\`a}}1 {è}{{\'e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1
{À}{{\`A}}1 {È}{{\'E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1
{ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1
{Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1
{â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1
{Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1
{œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1
{ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1
{€}{{\EUR}}1 {£}{{\pounds}}1 {«}{{\guillemotleft}}1
{»}{{\guillemotright}}1 {ñ}{{\~n}}1 {Ñ}{{\~N}}1 {¿}{{?`}}1
}
\lstset{style=eisvogel_listing_style}

\lstdefinelanguage{XML}
{
morestring=[b]",
moredelim=[s][\bfseries\color{listing-keyword}]{<}{\ },
moredelim=[s][\bfseries\color{listing-keyword}]{</}{>},
moredelim=[l][\bfseries\color{listing-keyword}]{/>},
moredelim=[l][\bfseries\color{listing-keyword}]{>},
morecomment=[s]{<?}{?>},
morecomment=[s]{<!--}{-->},
commentstyle=\color{listing-comment},
stringstyle=\color{listing-string},
identifierstyle=\color{listing-identifier}
}
$endif$

% https://github.com/Wandmalfarbe/pandoc-latex-template
% colors
%
\PassOptionsToPackage{[usenames, dvipsnames, svgnames, table]}{xcolor}

% make \XeLaTeX work
\usepackage{xltxtra}

% https://github.com/Wandmalfarbe/pandoc-latex-template
% listing colors
%
\definecolor{listing-background}{rgb}{0.97,0.97,0.97}
\definecolor{listing-rule}{HTML}{888888}
\definecolor{listing-numbers}{HTML}{000000}
\definecolor{listing-text-color}{HTML}{000000}
\definecolor{listing-keyword}{HTML}{000000}
\definecolor{listing-identifier}{HTML}{000000}
\definecolor{listing-string}{HTML}{000000}
\definecolor{listing-comment}{rgb}{0.4,0.4,0.4}
\definecolor{listing-javadoc-comment}{rgb}{0.4,0.4,0.4}

%
% https://github.com/Wandmalfarbe/pandoc-latex-template
%
$if(tables)$
%\renewcommand{\arraystretch}{1.3} % table spacing
\definecolor{table-gray}{HTML}{F5F5F5}
%\rowcolors{3}{white!100!white}{table-gray!100!white!100}
% Unfortunately the colored cells extend beyond the edge of the
% table because pandoc uses @-expressions (@{}) like so:
%
% \begin{longtable}[]{@{}ll@{}}
% \end{longtable}
%
% https://en.wikibooks.org/wiki/LaTeX/Tables#.40-expressions
\usepackage{longtable,booktabs}
$endif$

\usepackage{xhfill}

\usepackage{afterpage}
\usepackage{lastpage}
\newcommand\blankpage{%
\null
\thispagestyle{empty}%
\addtocounter{page}{-1}%
\newpage}

%bxascmac
%\usepackage{ascmac}
\usepackage{bxascmac}
\usepackage{fancybox}
\usepackage{ifoddpage}
\usepackage{tcolorbox}
\usepackage{tikz}
\usepackage[framemethod=tikz]{mdframed}

% Overwrite \begin{figure}[htbp] with \begin{figure}[H]
\usepackage{float}
\let\origfigure=\figure
\let\endorigfigure=\endfigure
\renewenvironment{figure}[1][]{%
\origfigure[H]
}{%
\endorigfigure
}
\newcommand{\surplus}[2]{%
\newcount\n \newcount\m \newcount\t
\n=#1 \m=#2 \t=\n%
\divide \n by \m%
\multiply \n by \m%
\advance \t by -\n%
#1=\t\relax%
}
\usepackage{pdflscape}
\newcommand{\Startlandscape}{\newgeometry{$lgeometry$}\begin{landscape}}
\newcommand{\Stoplandscape}{\end{landscape}\restoregeometry}

\renewcommand{\lstlistingname}{$listingTitle$}
\renewcommand{\tablename}{$tableTitle$}
\renewcommand{\figurename}{$figureTitle$}
\usepackage[$for(watermarkoption)$$watermarkoption$$sep$,$endfor$]{background}
